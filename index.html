<!DOCTYPE html>
<!--
  ~ Description blabla
  -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <meta name="description" content="MPP workflow for run id [011]"> -->
    <meta name="author" content="FD/VK/VK/SL">

    <title> MetaPathPrediction </title>

    <!-- links all local .css files -->
    <!--
    * Bootstrap v3.3.7 (http://getbootstrap.com)
    * Copyright 2011-2016 Twitter, Inc.
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
    -->

    <link rel="stylesheet" type="text/css" href="styles/dataTables.bootstrap4.min.css">
    <script src="scripts/framework/jquery331.js"></script>
    <script type="text/javascript" charset="utf8" src="scripts/framework/jquery.dataTables.js"></script>

    <link rel="stylesheet" href="styles/bootstrap.css">
    <script src="scripts/framework/bootstrap.bundle.min.js"></script> <!-- needed for table tabs -->
    <script type="text/javascript" charset="utf8" src="scripts/framework/dataTables.bootstrap.js"></script>


    <!-- Custom .css file -->

    <!-- nvd3 version 1.8.1 (https://github.com/novus/nvd3) 2015-06-15 -->
    <link rel="stylesheet" href="styles/nvd3_181.css">
    <!--
    *! DataTables Bootstrap 3 integration
    * Â©2011-2015 SpryMedia Ltd - datatables.net/license
    -->

    <!-- <link rel="stylesheet" type="text/css" href="styles/scroller.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="styles/fixedHeader.bootstrap4.css"> -->

    <!-- links local javascript files -->


    <script src="scripts/framework/d3v3.js"></script>
    <script src="scripts/framework/nvd3_181.js"></script>


    <link rel="stylesheet" href="styles/styles.css">
    <!-- Full Pipeline Data -->
    <script src="scripts/full.js"></script>

    <!-- links DataTables js files -->


    <!-- <script type="text/javascript" charset="utf8" src="scripts/framework/dataTables.scroller.min.js"></script>
    <script type="text/javascript" charset="utf8" src="scripts/framework/fixedHeader.bootstrap4.js"></script> -->

    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" type="text/javascript"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css"/> -->

    <!-- Graph and table functions -->
    <script src="scripts/drawPathwayTable.js"></script>
    <script src="scripts/drawSunburstGraph.js"></script>
    <script src="scripts/drawPieChartGraph.js"></script>
    <script src="scripts/drawHorizontalBarChart.js"> </script>
</head>

<body id="mpPrediction" data-spy="scroll" data-target=".navbar" data-offset="60">

<!-- fixed navigation bar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#mpPrediction">Start</a>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#generalInformation">GENERAL INFORMATION</a></li>
                <li><a href="#summary">SUMMARY</a></li>
                <li><a href="#details">DETAILS</a></li>
                <li><a href="#accessoryPathways">ACCESSORY PATHWAYS</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- jumbotron containing header -->
<div class="jumbotron mb-0">
    <h1> Metabolic Pathway Prediction </h1>
    <p> Visualization of predicted Pan-, Core- and Accessory-Pathways </p>
</div>

<!-- Container for parameters section -->
<div id="generalInformation" class="container-fluid ">
    <div class="data">
        <div class="row">
            <div class="col-sm-8">
                <h1> General Information </h1>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <h4> Analyzed species: </h4>
                <h4> Number of individuals: </h4>
                <h4> Input directory: </h4>
                <h4> Output directory: </h4>
            </div>
            <div class="col-sm-6">
                <h5><b id="species"></b></h5>
                <h5><b id="individuals"></b></h5>
                <h5><b id="in"></b></h5>
                <h5><b id="out"></b></h5>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <h2> Analyzed individuals :</h2>

            </div>
        </div>
    </div>
</div>

<!-- Container for summary section -->
<div id="summary" class="container-fluid bg-grey">
    <div class="data">
        <div class="row">
            <div class="col-sm-12">
                <h1> Core- and Accessory-Pathways </h1>
                <p> This graph gives an overview of the distribution of the Pan-Pathways into Core- and
                    Accessory-Pathways. </p>
                <div id="piechart">
                    <svg></svg>
                </div>
                <div id="sunburst">
                    <svg></svg>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Container for detail section with table -->
<div id="details" class="container-fluid">
    <div class="data">
        <div class="row">
            <div class="col-sm-12">
                <h1> Predicted Core- and Accessory-Pathways </h1>
                <p> This table shows all of the metabolic pathways predicted by MinPath. Occurring pathways in an
                    organism are highlighted. </p>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="active"><a href="#pantab" aria-controls="pantab" role="tab"
                                              data-toggle="tab">Pan</a></li>
                        <li><a href="#coretab" aria-controls="coretab" role="tab"
                               data-toggle="tab">Core</a></li>
                        <li><a href="#accessorytab" aria-controls="accessorytab" role="tab"
                               data-toggle="tab">Accessory</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="pantab">
                            <table id="pathwaytable" class="table table-striped table-bordered"
                                   style="width:100%" data-toggle="tooltip"></table>
                        </div>
                        <div class="tab-pane" id="coretab">
                            <table id="coretable" class="table table-striped table-bordered" style="width:100%"></table>
                        </div>
                        <div class="tab-pane" id="accessorytab">
                            <table id="accessorytable" class="table table-striped table-bordered"
                                   style="width:100%"></table>
                        </div>
                    </div>
                </div> <!-- End nav-tabs -->
            </div>
        </div>
    </div>
</div>

<!-- Container for section with barchart of accessory pathways -->
<div id="accessoryPathways" class="container-fluid bg-grey">
    <div class="data">
        <div class="row">
            <div class="col-sm-12">
                <h1> Quantity of predicted Accessory-Pathways </h1>
                <p> This horizontal barchart illustrates the number of accessory pathways for the corresponding metabolism. When hovering over a bar one can see the names of the bacteria that possess the listed metabolism. </p>
                <div id="horizontalBarChart">
                    <svg></svg>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="container-fluid text-center">
    <a href="#mpPrediction" title="To Top">
        <h2 class="navarrow"> ^ </h2>
    </a>
    <p> Metabolic Pathway Prediction Pipeline and Data Visualization Made By FD/VK/VK/SL </p>
</footer>

<script>
    /* Smooth scrolling when clicking on the links in the navbar */
    $(document).ready(function () {
        // Add smooth scrolling to all links in navbar + footer link
        $(".navbar a, footer a[href='#mpPrediction']").on('click', function (event) {

            // Make sure this.hash has a value before overriding default behavior
            if (this.hash !== "") {

                // Prevent default anchor click behavior
                event.preventDefault();

                // Store hash
                var hash = this.hash;

                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 900, function () {

                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        });
    });

    /* Get values for parameters section */
    var notSuitable = params["individuals"] - allIndividuals.length;
    document.getElementById("individuals").innerHTML = params["individuals"];
    //document.getElementById("dropout").innerHTML = " (" + notSuitable + " of them not suitable for pathway prediction)";
    document.getElementById("species").innerHTML = params["species"].replace('_', ' ');
    //document.getElementById("db").innerHTML = params["db"];
    document.getElementById("in").innerHTML = params["in"];
    document.getElementById("out").innerHTML = params["out"];
</script>

</body>
</html>
